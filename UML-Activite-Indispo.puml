@startuml Unavailability
skinparam titleBorderRoundCorner 15
skinparam titleBorderThickness 2
skinparam titleBorderColor black

title Unavailability Drivers and Vehicles
start

:Utilisateur demande disponibilites(startDate, endDate);

:TourController re√ßoit la requete;

partition "Verification Disponibilite" {
    :Recuperer conducteurs disponibles;
    :Recuperer vehicules disponibles;
}

:Proposer conducteurs et vehicules disponibles a l'utilisateur;

:Utilisateur selectionne conducteur et vehicule;

partition "Re-validation Disponibilite" {
    :Verifier disponibilite conducteur;
    if (Conducteur disponible?) then (Oui)
        :Verifier disponibilite vehicule;
        if (Vehicule disponible?) then (Oui)
            :Assigner et persister la tournee;
            :Confirmer assignation reussie;
            stop
        else (Non)
            :Afficher erreur - Vehicule indisponible;
            stop
        endif
    else (Non)
        :Afficher erreur - Conducteur indisponible;
        stop
    endif
}

@enduml
